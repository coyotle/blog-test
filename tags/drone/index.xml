<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Drone on Мини-блог об IT, Linux, Open Source, Tech</title><link>https://coyotle.ru/tags/drone/</link><description>Recent content in Drone on Мини-блог об IT, Linux, Open Source, Tech</description><generator>Hugo -- 0.152.2</generator><language>ru-RU</language><lastBuildDate>Thu, 02 Feb 2023 11:52:31 +0300</lastBuildDate><atom:link href="https://coyotle.ru/tags/drone/index.xml" rel="self" type="application/rss+xml"/><item><title>Автоматизация сборки и публикации блога Hugo</title><link>https://coyotle.ru/posts/deploy-hugo-blog/</link><pubDate>Thu, 02 Feb 2023 11:52:31 +0300</pubDate><guid>https://coyotle.ru/posts/deploy-hugo-blog/</guid><description>&lt;p&gt;В предыдущей заметке мы установили &lt;a href="https://coyotle.ru/posts/cicd-at-home/"&gt;Drone CI&lt;/a&gt;, в этой настроим автоматическую сборку и публикацию блога при пуше в git-репозиторий.&lt;/p&gt;
&lt;p&gt;После настройки Drone и авторизации в нем вы должны увидеть доступные вам репозитории. Для того чтобы Drone начал обрабатывать пайплайны необходимо активировать репозиторий. Для это в секции &lt;code&gt;Repositories&lt;/code&gt; заходим в нужный репозиторий и нажамаем &lt;code&gt;Activate repository&lt;/code&gt;. На странице настроек можно отключить вебхуки которые будут отслеживаться, настроить режим приватности, максимальное время выполнения пайплайна и название файла в котором Drone будет искать описание пайплайна (по умолчанию .drone.yml). Нажимаем &lt;code&gt;Save changes&lt;/code&gt;.&lt;/p&gt;</description></item><item><title>Drone CI</title><link>https://coyotle.ru/posts/cicd-at-home/</link><pubDate>Fri, 27 Jan 2023 03:48:54 +0300</pubDate><guid>https://coyotle.ru/posts/cicd-at-home/</guid><description>&lt;p&gt;В продолжение заметки &amp;ldquo;&lt;a href="https://coyotle.ru/posts/github-at-home"&gt;У нас есть github дома&lt;/a&gt;&amp;rdquo; добавим к нашему окружению систему автоматического тестирования и доставки ПО &lt;a href="https://www.drone.io/"&gt;Drone CI&lt;/a&gt;.
Документацию можно почитать тут &lt;a href="https://docs.drone.io/"&gt;https://docs.drone.io/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Из плюсов Drone по сравнению с Jenkins: простота установки, настройки и сопровождения, не надо изучать groovy, всё пишется на yaml.&lt;/p&gt;
&lt;p&gt;Drone CI состоит из двух сервисов: собственно Drone и ранеров которые будут выполнять необходимые задачи, в даном случае ранеры используют докер хост системы для запуска задач.&lt;/p&gt;
&lt;p&gt;Сам drone не имеет базы пользователей и использует OAuth внешней системы для авторизации пользователей.
Для настройки OAuth перейдите в раздел &lt;code&gt;user/settings/applications&lt;/code&gt; на вашем экземпляре forgejo/gitea и в подразделе &lt;code&gt;Authorized OAuth2 Applications&lt;/code&gt; создайте новое приложение. В поле Redirect URI укажите адрес вашего drone сервера, например &lt;code&gt;https://drone.example.ru/login&lt;/code&gt;. После создания приложения скопируйте client id и secret, они понадобятся ниже.&lt;/p&gt;</description></item></channel></rss>